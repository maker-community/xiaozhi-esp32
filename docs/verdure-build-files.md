# Verdure æ„å»ºç³»ç»Ÿ - æ–‡ä»¶æ¸…å•

## ğŸ“ æ–°å¢æ–‡ä»¶

### 1. GitHub Actions Workflow
- **`.github/workflows/build-verdure.yml`**
  - ä¸“é—¨ç”¨äº verdure åˆ†æ”¯çš„ CI/CD æµç¨‹
  - ä»…åœ¨ verdure åˆ†æ”¯è§¦å‘
  - è‡ªåŠ¨æ„å»ºæ‰€æœ‰æ¿å‹å˜ä½“
  - äº§ç‰©å‘½ååŒ…å« `-verdure` æ ‡è¯†

### 2. æ„å»ºè„šæœ¬
- **`scripts/release-verdure.py`**
  - verdure ä¸“ç”¨æ„å»ºè„šæœ¬
  - ä¸´æ—¶ä¿®æ”¹ CMakeLists.txt æ·»åŠ ç‰ˆæœ¬åç¼€
  - æ„å»ºå®Œæˆåè‡ªåŠ¨æ¢å¤æ–‡ä»¶
  - æ”¯æŒæ‰€æœ‰åŸ release.py çš„åŠŸèƒ½

### 3. æ–‡æ¡£
- **`docs/verdure-build.md`**
  - å®Œæ•´çš„ä½¿ç”¨è¯´æ˜
  - å·¥ä½œåŸç†è¯´æ˜
  - æ•…éšœæ’é™¤æŒ‡å—

## âœ… å·²æ¢å¤çš„æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²æ¢å¤åˆ°åŸå§‹çŠ¶æ€ï¼Œä¸ä¼šäº§ç”Ÿåˆå¹¶å†²çªï¼š

1. **`CMakeLists.txt`**
   - âœ… ä¿æŒåŸå§‹çš„ `set(PROJECT_VER "2.2.2")`
   - âœ… æ²¡æœ‰æ·»åŠ ä»»ä½•ç‰ˆæœ¬åç¼€ç›¸å…³ä»£ç 

2. **`.github/workflows/build.yml`**
   - âœ… ä¿æŒåŸå§‹çš„è§¦å‘åˆ†æ”¯ï¼ˆmain, ci/*ï¼‰
   - âœ… ä¿æŒåŸå§‹çš„æ„å»ºå‘½ä»¤
   - âœ… ä¿æŒåŸå§‹çš„äº§ç‰©å‘½å

3. **`scripts/release.py`**
   - âœ… ä¿æŒåŸå§‹çš„å‡½æ•°ç­¾å
   - âœ… æ²¡æœ‰ version_suffix å‚æ•°
   - âœ… ä¿æŒåŸå§‹çš„æ„å»ºé€»è¾‘

## ğŸ”§ è½»å¾®ä¿®æ”¹çš„æ–‡ä»¶

### `.gitignore`
æ·»åŠ äº†ä¸€è¡Œå¿½ç•¥è§„åˆ™ï¼š
```
CMakeLists.txt.verdure.bak
```

è¿™æ˜¯ verdure æ„å»ºè„šæœ¬åˆ›å»ºçš„ä¸´æ—¶å¤‡ä»½æ–‡ä»¶ï¼Œåº”è¯¥è¢«å¿½ç•¥ã€‚

## ğŸ“Š æ–‡ä»¶å¯¹æ¯”

### åŸå§‹æ–‡ä»¶ vs Verdure æ–‡ä»¶

| åŠŸèƒ½ | åŸå§‹æ–‡ä»¶ | Verdure æ–‡ä»¶ | å†²çªé£é™© |
|------|---------|-------------|---------|
| CI/CD | build.yml | build-verdure.yml | âŒ æ— å†²çª |
| æ„å»ºè„šæœ¬ | release.py | release-verdure.py | âŒ æ— å†²çª |
| CMakeé…ç½® | CMakeLists.txt | ï¼ˆä¸´æ—¶ä¿®æ”¹ï¼Œè‡ªåŠ¨æ¢å¤ï¼‰ | âŒ æ— å†²çª |
| ç‰ˆæœ¬åç¼€ | æ—  | -verdure | âŒ æ— å†²çª |

## ğŸŒ³ åˆ†æ”¯ç­–ç•¥

### ä¸»åˆ†æ”¯ (main)
```
.github/workflows/build.yml        â† ä¿æŒä¸å˜
scripts/release.py                  â† ä¿æŒä¸å˜
CMakeLists.txt                     â† ä¿æŒä¸å˜
```

### Verdure åˆ†æ”¯
```
.github/workflows/build.yml        â† ä¿æŒä¸å˜
.github/workflows/build-verdure.yml â† æ–°å¢æ–‡ä»¶
scripts/release.py                  â† ä¿æŒä¸å˜
scripts/release-verdure.py          â† æ–°å¢æ–‡ä»¶
CMakeLists.txt                     â† ä¿æŒä¸å˜
docs/verdure-build.md              â† æ–°å¢æ–‡æ¡£
```

## âœ¨ å…³é”®è®¾è®¡ç†å¿µ

### 1. éä¾µå…¥å¼è®¾è®¡
- æ‰€æœ‰ verdure ç›¸å…³åŠŸèƒ½éƒ½åœ¨æ–°å¢æ–‡ä»¶ä¸­
- åŸå§‹æ–‡ä»¶ä¿æŒå®Œå…¨ä¸å˜
- å¯ä»¥éšæ—¶åˆå¹¶ä¸»åˆ†æ”¯æ›´æ–°

### 2. è‡ªåŠ¨åŒ–ç®¡ç†
- ä¸´æ—¶ä¿®æ”¹æ–‡ä»¶ä¼šè‡ªåŠ¨æ¢å¤
- å¤‡ä»½æ–‡ä»¶è‡ªåŠ¨æ¸…ç†
- ç‰ˆæœ¬åç¼€è‡ªåŠ¨æ·»åŠ 

### 3. ç‹¬ç«‹è¿è¡Œ
- verdure å·¥ä½œæµç‹¬ç«‹è§¦å‘
- verdure è„šæœ¬ç‹¬ç«‹è¿è¡Œ
- ä¸ä¾èµ–ä¸»åˆ†æ”¯çš„ä¿®æ”¹

## ğŸ”„ åˆå¹¶ä¸»åˆ†æ”¯æµç¨‹

```bash
# 1. æ›´æ–°ä¸»åˆ†æ”¯
git checkout main
git pull origin main

# 2. åˆ‡æ¢åˆ° verdure åˆ†æ”¯
git checkout verdure

# 3. åˆå¹¶ä¸»åˆ†æ”¯ï¼ˆæ— å†²çªï¼ï¼‰
git merge main
# åªä¼šåˆå¹¶ verdure åˆ†æ”¯ç‰¹æœ‰çš„æ–°æ–‡ä»¶

# 4. æ¨é€è§¦å‘æ„å»º
git push origin verdure
```

## ğŸ“ ç»´æŠ¤æ£€æŸ¥æ¸…å•

### å®šæœŸæ£€æŸ¥é¡¹
- [ ] ä¸»åˆ†æ”¯çš„ release.py æœ‰é‡å¤§æ›´æ–°æ—¶ï¼ŒåŒæ­¥åˆ° release-verdure.py
- [ ] ä¸»åˆ†æ”¯çš„ build.yml æœ‰æ›´æ–°æ—¶ï¼Œè¯„ä¼°æ˜¯å¦éœ€è¦åŒæ­¥åˆ° build-verdure.yml
- [ ] æ£€æŸ¥ .gitignore æ˜¯å¦æ­£ç¡®å¿½ç•¥å¤‡ä»½æ–‡ä»¶
- [ ] éªŒè¯ verdure æ„å»ºäº§ç‰©çš„ç‰ˆæœ¬å·æ­£ç¡®

### æµ‹è¯•æ¸…å•
- [ ] æœ¬åœ°è¿è¡Œ `python scripts/release-verdure.py --list-boards` æˆåŠŸ
- [ ] æœ¬åœ°æ„å»ºå•ä¸ªæ¿å‹æˆåŠŸ
- [ ] GitHub Actions æ„å»ºæˆåŠŸ
- [ ] æ„å»ºäº§ç‰©åŒ…å« `-verdure` æ ‡è¯†
- [ ] CMakeLists.txt åœ¨æ„å»ºåæ­£ç¡®æ¢å¤

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

1. **é›¶å†²çª** - æ°¸è¿œä¸ä¼šä¸ä¸»åˆ†æ”¯äº§ç”Ÿåˆå¹¶å†²çª
2. **æ˜“ç»´æŠ¤** - æ‰€æœ‰ä¿®æ”¹é›†ä¸­åœ¨å°‘æ•°æ–°æ–‡ä»¶ä¸­
3. **å¯è¿½æº¯** - verdure ç‰ˆæœ¬å·æ¸…æ™°æ ‡è¯†
4. **å¯æ‰©å±•** - å®¹æ˜“æ·»åŠ æ›´å¤šå®šåˆ¶åŠŸèƒ½

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œå‚è€ƒï¼š
1. [docs/verdure-build.md](verdure-build.md) - è¯¦ç»†ä½¿ç”¨è¯´æ˜
2. GitHub Actions æ—¥å¿—
3. æ„å»ºè„šæœ¬è¾“å‡º

---

**æ€»ç»“**ï¼šè¿™ä¸ªç³»ç»Ÿé€šè¿‡æ–°å¢ç‹¬ç«‹æ–‡ä»¶çš„æ–¹å¼ï¼Œå®ç°äº†å®Œå…¨æ— å†²çªçš„å®šåˆ¶æ„å»ºèƒ½åŠ›ï¼ğŸ‰
